language: java
jdk:
    - openjdk6
env:
    # From http://stackoverflow.com/a/21841688
    - TERM=dumb
    - artifactory_user=jfly
secure:
    # Setting the artifactory_password env var
    - "S25NndSb6X5d5h7d8UbUrAZc4xzB4qiOWgulwHym+U0MnaswNKrLzAOkvYiBZjicY5BaaT6CB8+oZ8+BUeU0KuPIspasp3HqcLoWcLX9YUWa4g0/6VMb2PBa4DnZtRC4z4AJhXERePhjNo0J8pqI6pAhAOG7Nl20aa7CpxfCWJQ="
before_install:
    # From http://stackoverflow.com/a/11069162
    - sudo apt-get update
    - sudo apt-get install aptitude
    # To compile 32-bit Linux binaries even though we're on 64 bit.
    - sudo aptitude install -y libc6-dev-i386 lib32stdc++6 gcc-multilib g++-multilib
    # To compile 32-bit and 64-bit Windows binaries.
    - sudo aptitude install -y g++-mingw-w64
    # To compile for OS X, we need osxcross.
    - git clone --depth=1 https://github.com/tpoechtrager/osxcross
    - cd osxcross
    - (cd tarballs; wget https://dl.dropboxusercontent.com/u/1463845/osxcross/MacOSX10.7.sdk.tar.bz2)
    - sudo tools/get_dependencies.sh
    - yes | ./build.sh
    - eval `target/bin/osxcross-env`
    - cd ..
script:
    - ./gradlew jar
    #<<<
    - find build
    #<<<
    - java -jar build/libs/jtnoodle-0.0.1-SNAPSHOT.jar
    # Publish to oss.jfrog.org
    - ./gradlew artifactoryPublish
